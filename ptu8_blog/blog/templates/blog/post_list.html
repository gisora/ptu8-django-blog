{% extends 'base.html' %}
{% load static i18n %}
{% block title %}Welcome to BeBlEv{% endblock title %}

{% block main %}
    <form class="container-fluid">
        <select id="category" required onchange='location = this.value;'">
            <option value="">Select category...</option>
            <option value="{% url 'posts' %}">All</option>
            {% for category in categories %}
                <option value="?category_id={{ category.id }}">{{ category.name }}</option>
            {% endfor %}
            </select>
    </form>
    <article>
        <header>
            <form class="grid">
                <input type="text" name="search" placeholder="Search for posts" value="{{ request.GET.search }}"/>
                <button class="primary" type="submit">&#x1F373; Search</button>
            </form>
        </header>

        {% for post in post_list %}
        <details>
            <summary><strong>{{ post.title }} by {{ post.author.get_full_name }}</strong></summary>
            <section>
                {{ post.text|safe|truncatewords:50 }}
                <a href="{% url 'post-detail' post.id %}">Continue reading</a>
             </section>
            
        </details>
        {% endfor %}
    </article>
    {% include 'blog/includes/paginator.html' %}
{% endblock main %}